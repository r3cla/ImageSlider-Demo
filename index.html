<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Before / After Slider</title>
	<style>
		:root {
			color-scheme: light;
		}

		* {
			box-sizing: border-box;
		}

		body {
			margin: 0;
			min-height: 100vh;
			display: grid;
			place-items: center;
			background: #0f172a;
			font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif;
			color: #e2e8f0;
			padding: 12px;
		}

		.slider {
			width: 100%;
			max-width: 1024px;
			aspect-ratio: 1024 / 527;
			position: relative;
			overflow: hidden;
			border-radius: 12px;
			box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4), 0 0 1px rgba(0, 0, 0, 0.5);
			background: #0b1224;
			isolation: isolate;
			--pos: 50%;
			cursor: grab;
			transition: box-shadow 200ms ease;
		}

		.slider:hover {
			box-shadow: 0 25px 60px rgba(0, 0, 0, 0.5), 0 0 1px rgba(255, 255, 255, 0.1);
		}

		.slider:focus-visible {
			outline: 2px solid #3b82f6;
			outline-offset: 2px;
		}

		.slider:active {
			cursor: grabbing;
		}

		.slider img {
			position: absolute;
			inset: 0;
			width: 100%;
			height: 100%;
			object-fit: cover;
			user-select: none;
			pointer-events: none;
		}

		.after {
			clip-path: polygon(0 0, var(--pos) 0, var(--pos) 100%, 0 100%);
			transition: clip-path 80ms linear;
		}

		.labels {
			position: absolute;
			inset: 0;
			display: flex;
			justify-content: space-between;
			padding: clamp(12px, 3vw, 24px);
			font-weight: 700;
			text-transform: uppercase;
			letter-spacing: 0.08em;
			font-size: clamp(12px, 2.5vw, 16px);
			mix-blend-mode: difference;
			pointer-events: none;
			text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
		}

		.handle {
			position: absolute;
			top: 0;
			bottom: 0;
			left: var(--pos);
			transform: translateX(-50%);
			display: grid;
			place-items: center;
			width: 40px;
			margin-left: -20px;
			z-index: 10;
		}

		.handle::before {
			content: "";
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			width: 2px;
			height: 100%;
			background: #e2e8f0;
			opacity: 0.7;
			box-shadow: -8px 0 16px rgba(226, 232, 240, 0.15), 8px 0 16px rgba(226, 232, 240, 0.15);
		}

		.handle::after {
			content: "";
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			width: 28px;
			height: 28px;
			border: 1.5px solid #e2e8f0;
			border-radius: 50%;
			background: rgba(15, 23, 42, 0.7);
			backdrop-filter: blur(4px);
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3), inset 0 0 8px rgba(255, 255, 255, 0.08);
			transition: width 200ms ease, height 200ms ease, box-shadow 200ms ease;
		}

		.slider:hover .handle::after {
			width: 34px;
			height: 34px;
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4), inset 0 0 10px rgba(255, 255, 255, 0.1);
		}

		.sr-only {
			position: absolute;
			width: 1px;
			height: 1px;
			padding: 0;
			margin: -1px;
			overflow: hidden;
			clip: rect(0, 0, 0, 0);
			white-space: nowrap;
			border: 0;
		}
	</style>
</head>
<body>
	<div class="slider" aria-label="Before and after renovation comparison">
		<span class="sr-only" role="status">Drag to compare before and after</span>
		<img class="before" src="BEFORE.jpg" alt="Property before renovation" />
		<img class="after" src="AFTER.jpg" alt="Property after renovation" />
		<div class="labels">
			<span>Before</span>
			<span>After</span>
		</div>
		<div class="handle" aria-hidden="true"></div>
	</div>

	<script>
		const slider = document.querySelector('.slider');
		const after = slider.querySelector('.after');
		const handle = slider.querySelector('.handle');
		let isActive = false;

		const clamp = (value, min, max) => Math.min(Math.max(value, min), max);

		function setPosition(clientX) {
			const rect = slider.getBoundingClientRect();
			const percentage = ((clientX - rect.left) / rect.width) * 100;
			const clamped = clamp(percentage, 0, 100);
			slider.style.setProperty('--pos', `${clamped}%`);
		}

		function pointerMove(event) {
			if (!isActive) return;
			setPosition(event.clientX);
		}

		slider.addEventListener('pointerdown', (event) => {
			isActive = true;
			slider.setPointerCapture(event.pointerId);
			setPosition(event.clientX);
		});

		document.addEventListener('pointermove', pointerMove);

		document.addEventListener('pointerup', () => {
			isActive = false;
		});

		// Keyboard support for accessibility (arrow keys adjust the divider).
		slider.tabIndex = 0;
		slider.addEventListener('keydown', (event) => {
			const step = event.shiftKey ? 5 : 2;
			const current = parseFloat(getComputedStyle(slider).getPropertyValue('--pos'));
			if (event.key === 'ArrowLeft') {
				event.preventDefault();
				slider.style.setProperty('--pos', `${clamp(current - step, 0, 100)}%`);
			}
			if (event.key === 'ArrowRight') {
				event.preventDefault();
				slider.style.setProperty('--pos', `${clamp(current + step, 0, 100)}%`);
			}
		});
	</script>
</body>
</html>
